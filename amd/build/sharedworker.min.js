define("local_webworkerstest/sharedworker",["local_webworkers/helper"],(function(worker){return{init:function(){let portMap=[];let portNumber=function*(){for(let i=0;i<Infinity;i+=1)yield i}();self.addEventListener("connect",(e=>{let clientId=portNumber.next().value;portMap[clientId]=e.ports[0],e.ports[0].addEventListener("message",handleClientMessage(clientId)),e.ports[0].start()}));let handleClientMessage=cliendId=>e=>((clientId,e)=>{portMap.forEach((function(port,portId){clientId!=portId?port.postMessage({type:"TextMessage",clientId:clientId,contentsString:e.data.contentsString}):port.postMessage({type:"Pong",clientId:clientId,contentsString:e.data.contentsString})}))})(cliendId,e);worker.workerSetupComplete()}}}));

//# sourceMappingURL=sharedworker.min.js.map